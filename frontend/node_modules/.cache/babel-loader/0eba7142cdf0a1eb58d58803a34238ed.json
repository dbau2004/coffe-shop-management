{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';function AdminDashboard(){const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'USER'});const[updateRole,setUpdateRole]=useState({id:'',role:''});useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get('http://localhost:8080/api/admin/users',{auth:{username:'root',password:'rootpassword'}});setUsers(response.data);}catch(error){console.error('Lỗi khi lấy danh sách người dùng',error);}};const handleCreateUser=async e=>{e.preventDefault();try{await axios.post('http://localhost:8080/api/admin/users',newUser,{auth:{username:'root',password:'rootpassword'}});fetchUsers();setNewUser({username:'',password:'',role:'USER'});}catch(error){alert('Tạo người dùng thất bại');}};const handleUpdateRole=async e=>{e.preventDefault();try{await axios.put(`http://localhost:8080/api/admin/users/${updateRole.id}/role`,updateRole.role,{auth:{username:'root',password:'rootpassword'}});fetchUsers();setUpdateRole({id:'',role:''});}catch(error){alert('Cập nhật vai trò thất bại');}};return/*#__PURE__*/React.createElement(\"div\",{className:\"p-6\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"text-2xl mb-4\"},\"B\\u1EA3ng \\u0111i\\u1EC1u khi\\u1EC3n qu\\u1EA3n tr\\u1ECB\"),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-8\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-xl mb-2\"},\"T\\u1EA1o ng\\u01B0\\u1EDDi d\\xF9ng\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex space-x-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\",value:newUser.username,onChange:e=>setNewUser({...newUser,username:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"M\\u1EADt kh\\u1EA9u\",value:newUser.password,onChange:e=>setNewUser({...newUser,password:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/React.createElement(\"select\",{value:newUser.role,onChange:e=>setNewUser({...newUser,role:e.target.value}),className:\"border p-2\"},/*#__PURE__*/React.createElement(\"option\",{value:\"USER\"},\"USER\"),/*#__PURE__*/React.createElement(\"option\",{value:\"ADMIN\"},\"ADMIN\"),/*#__PURE__*/React.createElement(\"option\",{value:\"ROOT_ADMIN\"},\"ROOT_ADMIN\")),/*#__PURE__*/React.createElement(\"button\",{onClick:handleCreateUser,className:\"bg-blue-500 text-white p-2\"},\"T\\u1EA1o\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-8\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-xl mb-2\"},\"C\\u1EADp nh\\u1EADt vai tr\\xF2 ng\\u01B0\\u1EDDi d\\xF9ng\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex space-x-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"ID ng\\u01B0\\u1EDDi d\\xF9ng\",value:updateRole.id,onChange:e=>setUpdateRole({...updateRole,id:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/React.createElement(\"select\",{value:updateRole.role,onChange:e=>setUpdateRole({...updateRole,role:e.target.value}),className:\"border p-2\"},/*#__PURE__*/React.createElement(\"option\",{value:\"USER\"},\"USER\"),/*#__PURE__*/React.createElement(\"option\",{value:\"ADMIN\"},\"ADMIN\"),/*#__PURE__*/React.createElement(\"option\",{value:\"ROOT_ADMIN\"},\"ROOT_ADMIN\")),/*#__PURE__*/React.createElement(\"button\",{onClick:handleUpdateRole,className:\"bg-blue-500 text-white p-2\"},\"C\\u1EADp nh\\u1EADt vai tr\\xF2\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"text-xl mb-2\"},\"Danh s\\xE1ch ng\\u01B0\\u1EDDi d\\xF9ng\"),/*#__PURE__*/React.createElement(\"ul\",null,users.map(user=>/*#__PURE__*/React.createElement(\"li\",{key:user.id,className:\"border p-2 mb-2\"},user.username,\" - \",user.role)))));}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","AdminDashboard","users","setUsers","newUser","setNewUser","username","password","role","updateRole","setUpdateRole","id","fetchUsers","response","get","auth","data","error","console","handleCreateUser","e","preventDefault","post","alert","handleUpdateRole","put","createElement","className","type","placeholder","value","onChange","target","onClick","map","user","key"],"sources":["D:/LTW2/coffee-shop-management/frontend/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction AdminDashboard() {\r\n    const [users, setUsers] = useState([]);\r\n    const [newUser, setNewUser] = useState({ username: '', password: '', role: 'USER' });\r\n    const [updateRole, setUpdateRole] = useState({ id: '', role: '' });\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:8080/api/admin/users', {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            setUsers(response.data);\r\n        } catch (error) {\r\n            console.error('Lỗi khi lấy danh sách người dùng', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateUser = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.post('http://localhost:8080/api/admin/users', newUser, {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            fetchUsers();\r\n            setNewUser({ username: '', password: '', role: 'USER' });\r\n        } catch (error) {\r\n            alert('Tạo người dùng thất bại');\r\n        }\r\n    };\r\n\r\n    const handleUpdateRole = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.put(`http://localhost:8080/api/admin/users/${updateRole.id}/role`, updateRole.role, {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            fetchUsers();\r\n            setUpdateRole({ id: '', role: '' });\r\n        } catch (error) {\r\n            alert('Cập nhật vai trò thất bại');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <h2 className=\"text-2xl mb-4\">Bảng điều khiển quản trị</h2>\r\n\r\n            <div className=\"mb-8\">\r\n                <h3 className=\"text-xl mb-2\">Tạo người dùng</h3>\r\n                <div className=\"flex space-x-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Tên người dùng\"\r\n                        value={newUser.username}\r\n                        onChange={(e) => setNewUser({ ...newUser, username: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Mật khẩu\"\r\n                        value={newUser.password}\r\n                        onChange={(e) => setNewUser({ ...newUser, password: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <select\r\n                        value={newUser.role}\r\n                        onChange={(e) => setNewUser({ ...newUser, role: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    >\r\n                        <option value=\"USER\">USER</option>\r\n                        <option value=\"ADMIN\">ADMIN</option>\r\n                        <option value=\"ROOT_ADMIN\">ROOT_ADMIN</option>\r\n                    </select>\r\n                    <button onClick={handleCreateUser} className=\"bg-blue-500 text-white p-2\">Tạo</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mb-8\">\r\n                <h3 className=\"text-xl mb-2\">Cập nhật vai trò người dùng</h3>\r\n                <div className=\"flex space-x-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"ID người dùng\"\r\n                        value={updateRole.id}\r\n                        onChange={(e) => setUpdateRole({ ...updateRole, id: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <select\r\n                        value={updateRole.role}\r\n                        onChange={(e) => setUpdateRole({ ...updateRole, role: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    >\r\n                        <option value=\"USER\">USER</option>\r\n                        <option value=\"ADMIN\">ADMIN</option>\r\n                        <option value=\"ROOT_ADMIN\">ROOT_ADMIN</option>\r\n                    </select>\r\n                    <button onClick={handleUpdateRole} className=\"bg-blue-500 text-white p-2\">Cập nhật vai trò</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <h3 className=\"text-xl mb-2\">Danh sách người dùng</h3>\r\n                <ul>\r\n                    {users.map(user => (\r\n                        <li key={user.id} className=\"border p-2 mb-2\">\r\n                            {user.username} - {user.role}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}