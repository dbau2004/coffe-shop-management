{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const[users,setUsers]=useState([]);const[newUser,setNewUser]=useState({username:'',password:'',role:'USER'});const[updateRole,setUpdateRole]=useState({id:'',role:''});useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const response=await axios.get('http://localhost:8080/api/admin/users',{auth:{username:'root',password:'rootpassword'}});setUsers(response.data);}catch(error){console.error('Lỗi khi lấy danh sách người dùng',error);}};const handleCreateUser=async e=>{e.preventDefault();try{await axios.post('http://localhost:8080/api/admin/users',newUser,{auth:{username:'root',password:'rootpassword'}});fetchUsers();setNewUser({username:'',password:'',role:'USER'});}catch(error){alert('Tạo người dùng thất bại');}};const handleUpdateRole=async e=>{e.preventDefault();try{await axios.put(`http://localhost:8080/api/admin/users/${updateRole.id}/role`,updateRole.role,{auth:{username:'root',password:'rootpassword'}});fetchUsers();setUpdateRole({id:'',role:''});}catch(error){alert('Cập nhật vai trò thất bại');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mb-4\",children:\"B\\u1EA3ng \\u0111i\\u1EC1u khi\\u1EC3n qu\\u1EA3n tr\\u1ECB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl mb-2\",children:\"T\\u1EA1o ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\",value:newUser.username,onChange:e=>setNewUser({...newUser,username:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"M\\u1EADt kh\\u1EA9u\",value:newUser.password,onChange:e=>setNewUser({...newUser,password:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/_jsxs(\"select\",{value:newUser.role,onChange:e=>setNewUser({...newUser,role:e.target.value}),className:\"border p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"USER\",children:\"USER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ADMIN\",children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ROOT_ADMIN\",children:\"ROOT_ADMIN\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateUser,className:\"bg-blue-500 text-white p-2\",children:\"T\\u1EA1o\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl mb-2\",children:\"C\\u1EADp nh\\u1EADt vai tr\\xF2 ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"ID ng\\u01B0\\u1EDDi d\\xF9ng\",value:updateRole.id,onChange:e=>setUpdateRole({...updateRole,id:e.target.value}),className:\"border p-2\"}),/*#__PURE__*/_jsxs(\"select\",{value:updateRole.role,onChange:e=>setUpdateRole({...updateRole,role:e.target.value}),className:\"border p-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"USER\",children:\"USER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ADMIN\",children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ROOT_ADMIN\",children:\"ROOT_ADMIN\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateRole,className:\"bg-blue-500 text-white p-2\",children:\"C\\u1EADp nh\\u1EADt vai tr\\xF2\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl mb-2\",children:\"Danh s\\xE1ch ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsx(\"ul\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"li\",{className:\"border p-2 mb-2\",children:[user.username,\" - \",user.role]},user.id))})]})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","users","setUsers","newUser","setNewUser","username","password","role","updateRole","setUpdateRole","id","fetchUsers","response","get","auth","data","error","console","handleCreateUser","e","preventDefault","post","alert","handleUpdateRole","put","className","children","type","placeholder","value","onChange","target","onClick","map","user"],"sources":["D:/LTW2/coffee-shop-management/frontend/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction AdminDashboard() {\r\n    const [users, setUsers] = useState([]);\r\n    const [newUser, setNewUser] = useState({ username: '', password: '', role: 'USER' });\r\n    const [updateRole, setUpdateRole] = useState({ id: '', role: '' });\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:8080/api/admin/users', {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            setUsers(response.data);\r\n        } catch (error) {\r\n            console.error('Lỗi khi lấy danh sách người dùng', error);\r\n        }\r\n    };\r\n\r\n    const handleCreateUser = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.post('http://localhost:8080/api/admin/users', newUser, {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            fetchUsers();\r\n            setNewUser({ username: '', password: '', role: 'USER' });\r\n        } catch (error) {\r\n            alert('Tạo người dùng thất bại');\r\n        }\r\n    };\r\n\r\n    const handleUpdateRole = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.put(`http://localhost:8080/api/admin/users/${updateRole.id}/role`, updateRole.role, {\r\n                auth: { username: 'root', password: 'rootpassword' }\r\n            });\r\n            fetchUsers();\r\n            setUpdateRole({ id: '', role: '' });\r\n        } catch (error) {\r\n            alert('Cập nhật vai trò thất bại');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6\">\r\n            <h2 className=\"text-2xl mb-4\">Bảng điều khiển quản trị</h2>\r\n\r\n            <div className=\"mb-8\">\r\n                <h3 className=\"text-xl mb-2\">Tạo người dùng</h3>\r\n                <div className=\"flex space-x-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Tên người dùng\"\r\n                        value={newUser.username}\r\n                        onChange={(e) => setNewUser({ ...newUser, username: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Mật khẩu\"\r\n                        value={newUser.password}\r\n                        onChange={(e) => setNewUser({ ...newUser, password: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <select\r\n                        value={newUser.role}\r\n                        onChange={(e) => setNewUser({ ...newUser, role: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    >\r\n                        <option value=\"USER\">USER</option>\r\n                        <option value=\"ADMIN\">ADMIN</option>\r\n                        <option value=\"ROOT_ADMIN\">ROOT_ADMIN</option>\r\n                    </select>\r\n                    <button onClick={handleCreateUser} className=\"bg-blue-500 text-white p-2\">Tạo</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mb-8\">\r\n                <h3 className=\"text-xl mb-2\">Cập nhật vai trò người dùng</h3>\r\n                <div className=\"flex space-x-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"ID người dùng\"\r\n                        value={updateRole.id}\r\n                        onChange={(e) => setUpdateRole({ ...updateRole, id: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    />\r\n                    <select\r\n                        value={updateRole.role}\r\n                        onChange={(e) => setUpdateRole({ ...updateRole, role: e.target.value })}\r\n                        className=\"border p-2\"\r\n                    >\r\n                        <option value=\"USER\">USER</option>\r\n                        <option value=\"ADMIN\">ADMIN</option>\r\n                        <option value=\"ROOT_ADMIN\">ROOT_ADMIN</option>\r\n                    </select>\r\n                    <button onClick={handleUpdateRole} className=\"bg-blue-500 text-white p-2\">Cập nhật vai trò</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <h3 className=\"text-xl mb-2\">Danh sách người dùng</h3>\r\n                <ul>\r\n                    {users.map(user => (\r\n                        <li key={user.id} className=\"border p-2 mb-2\">\r\n                            {user.username} - {user.role}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}